<!--post内容-->
<div class="post-content">
  <%= link_to member_path(@post.member.id) do %>
    <%= attachment_image_tag @post.member, :profile_image, :fill, 30, 30, format: 'jpeg', fallback: "no_image.jpg" %>
  <% end %>
  <%= @post.body %>
  /ジャンル：<%= @post.genre.name %>
  <%= time_ago_in_words(@post.created_at) %> ago
  <hr>
</div>

<!--comment一覧-->
<div class="comment-lists">
  <% @post_comments.each do |post_comment| %>
    <%= link_to member_path(post_comment.member.id) do %>
    <%= attachment_image_tag post_comment.member, :profile_image, :fill, 30, 30, format: 'jpeg', fallback: "no_image.jpg", size:"30x30" %><br>
    <%= post_comment.member.account_name %>
    <% end %>
    <%= post_comment.comment %>
    <% if current_member.id == post_comment.member.id %>
      <%= link_to post_comment_path(post_comment.id), method: :delete do %>
        <i class="far fa-trash-alt"></i>
      <% end %>
    <% end %>
    <hr><br>
  <% end %>
</div>

<!--comment投稿フォーム-->
<div class="comment-form">
  <%= form_with model: @post_comment, local:true do |f| %>
    <%= f.text_area :comment, placeholder: "コメントを書きましょう" %>
    <!--post_idをpost_commentに渡す-->
    <%= f.hidden_field :post_id, :value => @post.id %>
    <%= f.submit "コメント" %>
  <% end %>
</div>