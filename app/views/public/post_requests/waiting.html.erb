<section class="request columns is-desktop">
  <div class="waiting-list column">
    <h4>承認待ちリクエスト</h4>
    <div class="requested-content">
    <% @requested_posts.each do |requested| %>
      <article class="box media" style="margin-bottom: 0px; margin-top: 0px;">
        <figure class="media-left is-square is-48-48" style="width: 15%;">
          <p class="image">
            <%= link_to member_path(requested.member.id) do %>
              <%= attachment_image_tag requested.member, :profile_image, :fill, 100, 100, format: 'jpeg', fallback: "no-prof-image.png", size: "50x50", style: "border-radius: 50%;" %><br>
            <% end %>
          </p>
        </figure>
        <div class="media-content">
          <div class="content">
            <strong><%= requested.member.account_name %></strong>
            <small>To:<%= requested.post.body %></small>
          </div>
          <%= button_to post_post_requests_path(requested.post.id), method: :patch, remote: true, params: {id: requested.id, is_accepted: true, is_requested: true}, class: "button is-primary is-small" do %>
            <i class="far fa-handshake"></i>　承認する
          <% end %>
        </div>
        <div class="media-right">
          <small><%= time_ago_in_words(requested.created_at) %>前</small>
        </div>
      </article>
    <% end %>
    </div>
  </div>
  <div class="accept-list column">
    <h4>承認済みリクエスト</h4>
    <div class="accepted-content">
    <% @accept_posts.each do |accept| %>
      <article class="box media" style="margin-bottom: 0px; margin-top: 0px;">
        <figure class="media-left is-square is-48-48" style="width: 15%;">
          <p class="image">
            <%= link_to member_path(accept.member.id) do %>
              <%= attachment_image_tag accept.member, :profile_image, :fill, 100, 100, format: 'jpeg', fallback: "no-prof-image.png", size: "30x30", style: "border-radius: 50%;" %><br>
            <% end %>
          </p>
        </figure>
        <div class="media-content">
          <div class="content">
            <strong><%= accept.member.account_name %></strong>
            <small>To:<%= accept.post.body %></small>
          </div>
          <%= button_to post_post_requests_path(accept.post.id), method: :patch, remote: true, params: {id: accept.id, is_accepted: false, is_requested: true}, class: "button is-warning is-small" do %>
            <i class="fas fa-handshake-slash"></i>　承認を取り消す
          <% end %>
        </div>
        <div class="media-right">
          <small><%= time_ago_in_words(accept.created_at) %>前</small>
        </div>
      </article>
    <% end %>
    </div>
  </div>
  <div class="requesting-list column">
    <h4>リクエスト中</h4>
    <div class="requesting-content">
      <!--非同期リクエストボタン-->
      <div id="request-btn">
        <%= render "public/post_requests/waiting-request-btn", requesting_posts: @requesting_posts %>
      </div>
    </div>
  </div>
</section>